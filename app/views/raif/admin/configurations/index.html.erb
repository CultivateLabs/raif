<h1 class="my-4"><%= t("raif.admin.configurations.index.title") %></h1>

<div class="row">
  <div class="col-12">
    <% @config_settings.each do |section| %>
      <div class="card mb-4">
        <div class="card-header bg-light">
          <h5 class="mb-0"><%= section[:category] %></h5>
        </div>
        <div class="card-body">
          <table class="table table-sm table-hover mb-0">
            <thead>
              <tr>
                <th style="width: 40%"><%= t("raif.admin.configurations.index.setting") %></th>
                <th style="width: 60%"><%= t("raif.admin.configurations.index.value") %></th>
              </tr>
            </thead>
            <tbody>
              <% section[:items].each do |item| %>
                <tr>
                  <td class="text-monospace"><%= item[:key] %></td>
                  <td>
                    <% if item[:value].is_a?(TrueClass) || item[:value].is_a?(FalseClass) %>
                      <span class="badge <%= item[:value] ? "bg-success" : "bg-secondary" %>">
                        <%= item[:value] %>
                      </span>
                    <% elsif item[:value].to_s.include?('*') %>
                      <code class="text-muted"><%= item[:value] %></code>
                    <% elsif item[:value].is_a?(String) && item[:value].length > 80 %>
                      <small class="text-muted"><%= item[:value] %></small>
                    <% elsif item[:value].present? %>
                      <code><%= item[:value] %></code>
                    <% else %>
                      <span class="text-muted fst-italic"><%= t("raif.admin.configurations.index.not_set") %></span>
                    <% end %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    <% end %>
  </div>
</div>

<div class="row mt-4">
  <div class="col-12">
    <div class="card">
      <div class="card-header bg-light">
        <h5 class="mb-0"><%= t("raif.admin.configurations.index.registered_llms") %></h5>
      </div>
      <div class="card-body">
        <% if Raif.llm_registry.any? %>
          <table class="table table-sm table-hover mb-0">
            <thead>
              <tr>
                <th><%= t("raif.admin.configurations.index.key") %></th>
                <th><%= t("raif.admin.common.class") %></th>
              </tr>
            </thead>
            <tbody>
              <% Raif.llm_registry.each do |key, llm_class| %>
                <tr>
                  <td>
                    <code><%= key %></code>
                    <% if key.to_s == @config.default_llm_model_key.to_s %>
                      <span class="badge bg-primary ms-2"><%= t("raif.admin.configurations.index.default") %></span>
                    <% end %>
                  </td>
                  <td class="text-muted"><%= llm_class.name %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        <% else %>
          <div class="alert alert-warning mb-0">
            <%= t("raif.admin.configurations.index.no_llms_registered") %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="row mt-4">
  <div class="col-12">
    <div class="card">
      <div class="card-header bg-light">
        <h5 class="mb-0"><%= t("raif.admin.configurations.index.registered_embedding_models") %></h5>
      </div>
      <div class="card-body">
        <% if Raif.embedding_model_registry.any? %>
          <table class="table table-sm table-hover mb-0">
            <thead>
              <tr>
                <th><%= t("raif.admin.configurations.index.key") %></th>
                <th><%= t("raif.admin.common.class") %></th>
              </tr>
            </thead>
            <tbody>
              <% Raif.embedding_model_registry.each do |key, model_class| %>
                <tr>
                  <td>
                    <code><%= key %></code>
                    <% if key.to_s == @config.default_embedding_model_key.to_s %>
                      <span class="badge bg-primary ms-2"><%= t("raif.admin.configurations.index.default") %></span>
                    <% end %>
                  </td>
                  <td class="text-muted"><%= model_class.name %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        <% else %>
          <div class="alert alert-info mb-0">
            <%= t("raif.admin.configurations.index.no_embedding_models_registered") %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
